<div class="d-flex flex-column">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-lg-12">
        <div class="tickets-card2 card shadow-lg mt-2 mb-2 pt-0 pb-1">
          <div class="row">
            <div class="col-xs-12 col-lg-5 justify-content-left ml-3 mt-4 pt-2">
              <a
                class="btn btn-info btn-sm"
                role="button"
                routerLink="/management-reports"
                ><i class="fas fa-chart-line fa-sm text-white"></i> Reports</a
              >&nbsp;
              <a
                class="btn btn-info btn-sm"
                role="button"
                routerLink="authpage/register-client"
                ><i class="fas fa-envelope text-white"></i>&nbsp;Email</a
              >
            </div>
            <div
              class="d-sm-flex col-xs-12 col-offset-lg-6 col-lg-6 justify-content-end align-items-end ml-3 mr -0 mt-3 pt-0 px-0"
            >
              <h5 class="text-info font-weight-bold mt-0 pt-0 pl-3 ml-0 mr-0 ">
                <hr class="top mt-1 mb-0" />
                RFQ APPROVAL
                <hr class="bottom mt-1 mb-0" />
              </h5>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class=" col-xs-12 col-lg-12">
        <div class="rfqs card shadow mb-4">
          <div class="card-body p-3">
            <div class=" mx-auto">
              <tabset>
                <tab heading="RFQ Listing" class="rfq-listing text-info">
                  <div class="card shadow mt-3 mx-3 mb-4" *ngIf="showTable">
                    <div class="card-body p-4">
                      <div class="table-responsive">
                        <table class="table table-striped table-hover">
                          <thead class="text-info">
                            <tr>
                              <th style="width: 5%">
                                Action
                              </th>
                              <th style="width: 2%">
                                #
                              </th>
                              <th style="width: 5%">
                                RFQ Serial No.
                              </th>
                              <th style="width: 17%">
                                Client Name
                              </th>
                              <th style="width: 20%">
                                RFQ Source
                              </th>
                              <th style="width: 8%">
                                No. Of Items
                              </th>

                              <th style="width: 12%">
                                Total Amount
                              </th>
                              <th style="width: 15%">
                                Department
                              </th>
                              <th style="width: 16%">
                                User Queue
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr
                              class="select_listing"
                              *ngFor="let rfq of rfqTable; let i = index"
                            >
                              <td class="text-info">
                                <div class="dropdown">
                                  <a class="pr-5 align-self-center">
                                    <i
                                      class="fa fa-ellipsis-v"
                                      style="font-size: 18px;"
                                    ></i>
                                  </a>
                                  <div class="dropdown-content">
                                    <a
                                      class="text-info"
                                      (click)="filterClients(rfq.clientName)" (click)="openModal(client_template)"
                                    >
                                      <i class="fas fa-briefcase"> </i>
                                      Client details
                                    </a>
                                    <a class="text-primary" (click)="filterRfq(rfq.rfqId)">
                                      <i class="fas fa-edit"> </i>
                                      Edit
                                    </a>
                                    <a
                                      class="text-info"
                                      routerLink="/frontdeskdashboard"
                                    >
                                      <i class="fas fa-level-down-alt"> </i>
                                      Defer
                                    </a>
                                    <a
                                      class="text-success"
                                      routerLink="/qa-dashboard"
                                    >
                                      <i class="fas fa-check"> </i>
                                      Approve
                                    </a>
                                  </div>
                                </div>
                              </td>

                              <td (click)="openModal(template)" (click)="filterRfqs(rfq.rfqId)">
                                {{i+1}}
                              </td>
                              <td (click)="openModal(template)" (click)="filterRfqs(rfq.rfqId)">
                                {{ rfq.rfqId }}
                              </td>
                              <td (click)="openModal(template)" (click)="filterRfqs(rfq.rfqId)">
                                {{ rfq.clientName }}
                              </td>
                              <td (click)="openModal(template)" (click)="filterRfqs(rfq.rfqId)">
                                {{ rfq.rfqSource }}
                              </td>
                              <td (click)="openModal(template)" (click)="filterRfqs(rfq.rfqId)">
                                {{ rfq.noOfItems }}
                              </td>
                              <td (click)="openModal(template)" (click)="filterRfqs(rfq.rfqId)">
                                {{ rfq.totalAmount }}
                              </td>

                              <td (click)="openModal(template)" (click)="filterRfqs(rfq.rfqId)">
                                {{ rfq.department }}
                              </td>

                              <td (click)="openModal(template)" (click)="filterRfqs(rfq.rfqId)">
                                {{ rfq.userName }}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                  <div *ngIf="showEditTable"><app-edit-rfq [rfqData]=rfqData></app-edit-rfq></div>
                </tab>
                <tab heading="RFQ Status" class="rfq-status text-info">
                  <div class="card shadow mt-3 mx-3 mb-4">
                    <div class="card-body p-4">
                      <div class="table-responsive">
                        <table class="table table-striped">
                          <thead class="text-info">
                            <tr>
                              <th style="width: 2%">
                                #
                              </th>
                              <th style="width: 13%">
                                RFQ Serial No.
                              </th>
                              <th style="width: 20%">
                                User Queue
                              </th>
                              <th style="width: 20%">
                                Movement Status
                              </th>
                              <th style="width: 20%">
                                Processing Status
                              </th>

                              <th style="width: 20%">
                                Movement Timestamp
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr
                              *ngFor="let status of rfqStatus; let i = index"
                            >
                              <td>
                                {{ i+1 }}
                              </td>
                              <td>
                                {{ status.rfqId }}
                              </td>
                              <td>
                                {{ status.userName }}
                              </td>

                              <td>
                                <div *ngIf="status.movtStatus == 'Approved'">
                                  <span class="badge badge-success">
                                    {{ status.movtStatus }}
                                  </span>
                                </div>
                                <div *ngIf="status.movtStatus == 'Received'">
                                  <span class="badge badge-primary">
                                    {{ status.movtStatus }}
                                  </span>
                                </div>
                                <div *ngIf="status.movtStatus == 'Deferred'">
                                  <span class="badge badge-danger">
                                    {{ status.movtStatus }}
                                  </span>
                                </div>
                                <div *ngIf="status.movtStatus == 'Created'">
                                  <span class="badge badge-info">
                                    {{ status.movtStatus }}
                                  </span>
                                </div>
                              </td>

                              <td>
                                <div *ngIf="status.processStatus == 'Costed'">
                                  <span class="badge badge-success">
                                    {{ status.processStatus }}
                                  </span>
                                </div>
                                <div
                                  *ngIf="
                                    status.processStatus == 'Pending costing'
                                  "
                                >
                                  <span class="badge badge-danger">
                                    {{ status.processStatus }}
                                  </span>
                                </div>
                              </td>

                              <td>
                                {{ status.movtTimestamp }}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- /.card-body -->
                  </div>
                  <!-- /.card -->
                </tab>
              </tabset>
            </div>
            <!-- /.content -->
            <!-- /.content-wrapper -->

            <!-- Content Wrapper. Contains page content -->
          </div>
        </div>
      </div>
      <ng-template #template>
        <div class="modal-content">
          <div class="modal-header bg-info modal-lg pl-3 py-2">
            <h4 class="modal-title pl-5">RFQ Details</h4>

            <button
              type="button"
              class="close pull-right"
              aria-label="Close"
              (click)="modalRef.hide()"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body bg-light">
            <div class="card shadow-sm">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="rfq_table table-striped">
                    <thead class="text-info">
                      <tr>
                        <th>#</th>
                        <th>Item ID</th>
                        <th>Item name</th>
                        <th>Unit</th>
                        <th>Quantity</th>
                        <th>Unit cost</th>
                        <th>Total cost</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of rfqData; let i = index">
                        <td>{{ i+1}}</td>
                        <td>{{ item.stockId }}</td>
                        <td>{{ item.itemName }}</td>
                        <td>{{ item.unit }}</td>
                        <td>{{ item.qtyRequired | number }}</td>
                        <td>{{ item.unitCost | number }}</td>
                        <td>
                          {{ item.qtyRequired * item.unitCost | number }}
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-template>
      <ng-template #client_template>
        <div class="modal-content">
          <div class="modal-header bg-info modal-lg pl-3 py-2">
            <h4 class="modal-title pl-5">Client Details</h4>

            <button
              type="button"
              class="close pull-right"
              aria-label="Close"
              (click)="modalRef.hide()"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body bg-light">
            <div class="card shadow-sm">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="client_table table-striped">
                    <thead class="text-info">
                      <th>#</th>
                      <th>Id</th>
                      <th>Client Name</th>
                      <th>Phone Number</th>
                      <th>Email</th>
                    </thead>
                    <tbody>
                      <tr *ngFor="let client of clientOne; let i = index">
                        <td>
                            {{ i+1 }}
                        </td>
                        <td>
                            {{ client.clientId }}
                        </td>
                        <td >
                            {{ client.clientName }}
                        </td>
                        <td>
                            {{ client.phoneNumber }}
                        </td>
                        <td>
                            {{ client.email }}
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-template>
    </div>
    <!-- <footer class="main-footer"> -->
    <div class="container mt-3 pb-3">
      <div class="col-xs-12 col-lg-12">
        <div class="small text-center text-danger">
          Copyright &copy; 2020 - Brimasmedia Ltd
        </div>
      </div>
    </div>
    <!-- </footer> -->
  </div>
</div>
